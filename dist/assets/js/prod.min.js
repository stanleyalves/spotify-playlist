!function e(t,a,n){function r(s,c){if(!a[s]){if(!t[s]){var i="function"==typeof require&&require;if(!c&&i)return i(s,!0);if(o)return o(s,!0);var m=new Error("Cannot find module '"+s+"'");throw m.code="MODULE_NOT_FOUND",m}var l=a[s]={exports:{}};t[s][0].call(l.exports,function(e){var a=t[s][1][e];return r(a?a:e)},l,l.exports,e,t,a,n)}return a[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,a){e("./modules/commentBox");!function(){console.log("JS working")}()},{"./modules/commentBox":2}],2:[function(e,t,a){function n(){for(var e=[].slice.call(arguments),t=e[0],a=1,n=e.length;n>a;a++){var r=e[a];for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}function r(e){var t=n({url:void 0,dataType:"text",data:"",cache:!0,success:function(e){},error:function(e){},method:"GET",async:!0},e);if(t.url){"GET"!==t.method||t.cache||(t.data+="_="+(new Date).getTime());var a=new XMLHttpRequest;a.onreadystatechange=function(){var e=a.readyState;if(!(4>e)&&4===e){if(200!==a.status&&0!==a.status)return void t.error.call(this,a.responseText);switch(t.dataType){case"text":case"html":case"script":t.success.call(this,a.responseText);break;case"json":t.success.call(this,JSON.parse(a.responseText));break;case"xml":t.success.call(this,a.responseXML)}}},a.onerror=function(){t.error.call(this,a.responseText)},a.open(t.method,t.url,t.async),"POST"===t.method&&(a.setRequestHeader("Content-type","application/json;charset=UTF-8"),t.data=t.data instanceof Object?JSON.stringify(t.data):t.data),a.send(t.data)}}var o=new Showdown.converter,s=React.createClass({displayName:"CommentBox",loadCommentsFromServer:function(){r({url:this.props.url,method:"GET",success:function(e){console.log(this),console.log(e);var t=JSON.parse(e);this.setState({data:t})}.bind(this)})},handleCommentSubmit:function(e){var t=this.state.data;console.log(e),t.push(e),this.setState({data:t},function(){r({url:this.props.url,method:"POST",dataType:"json",success:function(e){this.setState({data:e})}.bind(this),data:e})})},getInitialState:function(){return{data:[]}},componentDidMount:function(){this.loadCommentsFromServer(),setInterval(this.loadCommentsFromServer,this.props.pollInterval)},render:function(){return React.createElement("div",{className:"commentBox"},React.createElement("h1",null,"Comments"),React.createElement(c,{data:this.state.data}),React.createElement(i,{onCommentSubmit:this.handleCommentSubmit}))}}),c=React.createClass({displayName:"CommentList",render:function(){var e=this.props.data.map(function(e){return React.createElement(m,{author:e.author},e.text)});return React.createElement("div",{className:"commentList"},e)}}),i=React.createClass({displayName:"CommentForm",handleSubmit:function(e){e.preventDefault();var t=React.findDOMNode(this.refs.author).value.trim(),a=React.findDOMNode(this.refs.text).value.trim();a&&t&&(this.props.onCommentSubmit({author:t,text:a}),React.findDOMNode(this.refs.author).value="",React.findDOMNode(this.refs.text).value="")},render:function(){return React.createElement("form",{className:"commentForm",onSubmit:this.handleSubmit},React.createElement("input",{type:"text",placeholder:"Your name",ref:"author"}),React.createElement("input",{type:"text",placeholder:"Say something...",ref:"text"}),React.createElement("input",{type:"submit",value:"Post"}))}}),m=React.createClass({displayName:"Comment",render:function(){var e=o.makeHtml(this.props.children.toString());return React.createElement("div",{className:"comment"},React.createElement("h2",{className:"commentAuthor"},this.props.author),React.createElement("span",{dangerouslySetInnerHTML:{__html:e}}))}});React.render(React.createElement(s,{url:"/assets/data/comments.json",pollInterval:2e3}),document.body)},{}]},{},[1]);